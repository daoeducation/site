<section class="cookies">

    <h3 class="cookies__titulo pt-2">驴Aceptas Cookies? </h3>

    <h4 class="cookies__texto mb-2">Guardamos cookies para entender c贸mo usas nuestro sitio.</h4>
    <div class="cookies__botones pb-2">
        <button class="cookies__boton cookies__boton--si btn btn-pink btn-sm text-uppercase">隆S铆, Acepto!</button>
        <button class="cookies__boton cookies__boton--no text-uppercase btn btn-sm btn-primary">No</button>
        <a class="text-uppercase btn btn-sm btn-primary" href='/politica-privacidad-cookies.html' target="_blank">M谩s info</a>
    </div>
</section>

<!-- No borrar, aqu铆 se generar谩n todas las etiquetas <script> si acepta el usuario -->
<div id="nuevosScripts"></div>

<script defer>
let cookies = () => {
    //======================================================================
    // COOKIES
    //======================================================================

    //-----------------------------------------------------
    // Configuraci贸n
    //-----------------------------------------------------
    const urlsScriptsCookies = ['https://www.googletagmanager.com/gtag/js?id=AW-381645194'];

    function contenidoScriptsCookies () {
        // Google Tag Manager
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'AW-381645194');
        // Fin Google Tag Manager
    }


    //-----------------------------------------------------
    // Variables
    //-----------------------------------------------------
    const seccionCookie = document.querySelector('section.cookies');
    const cookieSi = document.querySelector('.cookies__boton--si');
    const cookieNo = document.querySelector('.cookies__boton--no');
    const nuevosScripts = document.querySelector('#nuevosScripts');

    //-----------------------------------------------------
    // Funciones
    //-----------------------------------------------------

    /**
      * M茅todo que oculta la secci贸n de Cookie para siempre
      */
    function ocultarCookie() {
        // Borra la secci贸n de cookies en el HTML
        seccionCookie.remove();
    }

    /**
      * M茅todo que marca las cookies como aceptadas
      */
    function aceptarCookies() {
        // Oculta el HTML de cookies
        ocultarCookie();
        // Guarda que ha aceptado
        localStorage.setItem('cookie', true);
        // Tu codigo a ejecutar si aceptan las cookies
        ejecutarSiAcepta();
    }

    /**
      * M茅todo que marca las cookies como denegadas
      */
    function denegarCookies() {
        // Oculta el HTML de cookies
        ocultarCookie();
        // Guarda que ha aceptado
        localStorage.setItem('cookie', false);
    }

    /**
      * M茅todo que ejecuta tu c贸digo si aceptan las cookies
      */
    function ejecutarSiAcepta() {
        // Crea los <script>
        urlsScriptsCookies.forEach((url) => {
            const nuevoScript = document.createElement('script');
            nuevoScript.setAttribute('src', url);
            nuevosScripts.appendChild(nuevoScript);
        });
        // Lanza los c贸digos
        contenidoScriptsCookies();
    }

    /**
      * M茅todo que inicia la l贸gica
      */
    function iniciar() {
        // Comprueba si en el pasado el usuario ha marcado una opci贸n
        if (localStorage.getItem('cookie') !== null) {
            if(localStorage.getItem('cookie') === 'true') {
                // Acept贸
                aceptarCookies();
            } else {
                // No acept贸
                denegarCookies();
            }
        }
    }

    //-----------------------------------------------------
    // Eventos
    //-----------------------------------------------------
    cookieSi.addEventListener('click',aceptarCookies, false);
    cookieNo.addEventListener('click',denegarCookies, false);

    return {
        iniciar: iniciar
    }
}

// Activa el c贸digo. Comenta si quieres desactivarlo.
cookies().iniciar();

</script>
